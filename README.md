# Libros DB

## Requisitos

-   VersiÃ³n de Node.js 20.11 / 21.2

## Instalaciones previas

```sh
npm install
```

Levantar servidor

```sh
npm run start
```

Para ver parte frontend

```sh
http://localhost:3000
```

## Tablas creadas en:

database/queries.sql

```sql
DROP TABLE IF EXISTS PEDIDOS;
DROP TABLE IF EXISTS LIBROS;

CREATE TABLE LIBROS (
	ID VARCHAR PRIMARY KEY,
	NOMBRE VARCHAR NOT NULL,
	PRECIO INT CHECK(PRECIO >= 0),
	AUTOR VARCHAR NOT NULL,
	STOCK INT CHECK(STOCK >= 0) DEFAULT 0
);

CREATE TABLE PEDIDOS (
	ID SERIAL PRIMARY KEY,
	CANTIDAD INT CHECK(CANTIDAD >= 0),
	LIBRO_ID VARCHAR NOT NULL,
	FOREIGN KEY (LIBRO_ID) REFERENCES LIBROS(ID) ON DELETE CASCADE
);

-- seeders
INSERT INTO LIBROS (ID, NOMBRE, PRECIO, AUTOR, STOCK) VALUES
('20BY3', 'NOMBRE 1', 100, 'AUTOR 1', 10),
('21BY4', 'NOMBRE 2', 200, 'AUTOR 2', 20);

SELECT * FROM LIBROS;

BEGIN;

UPDATE LIBROS
SET STOCK = STOCK - 1
WHERE ID = '20BY3';

INSERT INTO PEDIDOS (CANTIDAD, LIBRO_ID)
VALUES (1, '20BY3');

COMMIT;
```
